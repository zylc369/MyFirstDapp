{"ast":null,"code":"var _jsxFileName = \"D:\\\\Web3WorkSpace\\\\petrolexchange\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\n// import logo from './logo.svg';\nimport './App.css';\nimport { useState } from 'react';\n// import ethers from 'ethers';\nimport Web3 from 'web3';\nimport newBankContract from \"./blockchain/bankContract\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const [web3, setWeb3] = useState(null); // useState修改组件内状态的hoo\n  const [address, setAddress] = useState(null);\n  const [bankContract, setBankContract] = useState(null);\n  const [myDeposit, setMyDeposit] = useState(null);\n  const [amount, setAmount] = useState();\n  const [receiveAddress, setReceiveAddress] = useState();\n  const getMyDeposit = async () => {\n    const depositCount = await bankContract.methods.myBalance().call({\n      from: address\n    });\n    console.log(\"myDeposit is :\", depositCount);\n    setMyDeposit(\"\" + depositCount);\n  };\n  const newNumber = event => {\n    setAmount(event.target.value);\n  };\n  const newAddress = event => {\n    setReceiveAddress(event.target.value);\n  };\n  const deposit = async () => {\n    await bankContract.methods.deposit(amount).send({\n      from: address\n    });\n  };\n  const withdraw = async () => {\n    await bankContract.methods.withdraw(amount).send({\n      from: address\n    });\n  };\n  const transfer = async () => {\n    await bankContract.methods.bankTransfer(amount, receiveAddress).send({\n      from: address\n    });\n  };\n  const connectWallet = async () => {\n    // 请求链接钱包\n    const account = await window.ethereum.request({\n      method: 'eth_requestAccounts'\n    });\n    // 抓取web3文件\n    const web3 = new Web3(window.ethereum);\n    setWeb3(web3);\n    // 抓取钱包账号地址\n    const accounts = await web3.eth.getAccounts();\n    console.log(accounts[0]);\n    setAddress(accounts[0]);\n\n    // 抓取智能合约\n    const pt = newBankContract(web3);\n    setBankContract(pt);\n  };\n  return /*#__PURE__*/_jsxDEV(\"body\", {\n    className: \"body\",\n    style: {\n      height: '100vh'\n    },\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"App bg-img\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"h1\",\n          children: \"REN KE BANK\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"button\",\n          onClick: connectWallet,\n          children: \"connect wallet\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"h3\",\n          children: [\"\\u8D26\\u6237\\u5730\\u5740-Address:\", address]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"h3\",\n              children: [\"\\u94F6\\u884C\\u4F59\\u989D:\", myDeposit, \" \", /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: getMyDeposit,\n                children: \"\\u67E5\\u8BE2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 79,\n                columnNumber: 46\n              }, this), \" \"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 79,\n              columnNumber: 11\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 9\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"input\",\n              onChange: newNumber,\n              type: \"type\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 85,\n              columnNumber: 11\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: deposit,\n              children: \"\\u5B58\\u94B1\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 86,\n              columnNumber: 11\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 9\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false), /*#__PURE__*/_jsxDEV(\"section\", {\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"input\",\n              onChange: newNumber,\n              type: \"type\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 92,\n              columnNumber: 11\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: withdraw,\n              children: \"\\u53D6\\u94B1\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 93,\n              columnNumber: 11\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 9\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: [\"\\u8F6C\\u8D26\\u5730\\u5740\\uFF1A\", /*#__PURE__*/_jsxDEV(\"input\", {\n                className: \"input\",\n                onChange: newAddress,\n                type: \"type\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 98,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 98,\n              columnNumber: 11\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [\"\\u8F6C\\u8D26\\u91D1\\u989D\\uFF1A\", /*#__PURE__*/_jsxDEV(\"input\", {\n                className: \"input\",\n                onChange: newNumber,\n                type: \"type\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 99,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: transfer,\n                children: \"\\u8F6C\\u8D26\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 99,\n                columnNumber: 78\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 99,\n              columnNumber: 11\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 9\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 7\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 5\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 70,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"bbXZ4u2Z71uafCM0O45njhpu+nw=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["useState","Web3","newBankContract","jsxDEV","_jsxDEV","Fragment","_Fragment","App","_s","web3","setWeb3","address","setAddress","bankContract","setBankContract","myDeposit","setMyDeposit","amount","setAmount","receiveAddress","setReceiveAddress","getMyDeposit","depositCount","methods","myBalance","call","from","console","log","newNumber","event","target","value","newAddress","deposit","send","withdraw","transfer","bankTransfer","connectWallet","account","window","ethereum","request","method","accounts","eth","getAccounts","pt","className","style","height","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","onChange","type","_c","$RefreshReg$"],"sources":["D:/Web3WorkSpace/petrolexchange/src/App.js"],"sourcesContent":["// import logo from './logo.svg';\nimport './App.css';\nimport { useState } from 'react';\n// import ethers from 'ethers';\nimport Web3 from 'web3';\nimport newBankContract from \"./blockchain/bankContract\";\n\nfunction App() {\n\n  const [web3, setWeb3] = useState(null); // useState修改组件内状态的hoo\n  const [address, setAddress] = useState(null);\n  const [bankContract, setBankContract] = useState(null);\n  const [myDeposit, setMyDeposit] = useState(null);\n  const [amount, setAmount] = useState();\n  const [receiveAddress, setReceiveAddress] = useState();\n  \n\n  const getMyDeposit = async() => {\n    const depositCount = await bankContract.methods.myBalance().call({\n      from : address\n    });\n    console.log(\"myDeposit is :\", depositCount);\n    setMyDeposit(\"\"+depositCount);\n  };\n\n  const newNumber = (event) => {\n    setAmount(event.target.value);\n  };\n  const newAddress = (event) => {\n    setReceiveAddress(event.target.value);\n  };\n\n  const deposit = async() => {\n    await bankContract.methods.deposit(amount).send({\n      from : address\n    });\n  };\n\n  const withdraw = async() => {\n    await bankContract.methods.withdraw(amount).send({\n      from : address\n    });\n  };\n\n  const transfer = async() => {\n    await bankContract.methods.bankTransfer(amount, receiveAddress).send({\n      from : address\n    });\n  };\n\n  const connectWallet = async() => {\n    // 请求链接钱包\n    const account = await window.ethereum.request({\n      method:'eth_requestAccounts'\n    });\n    // 抓取web3文件\n    const web3 = new Web3(window.ethereum);\n    setWeb3(web3);\n    // 抓取钱包账号地址\n    const accounts = await web3.eth.getAccounts();\n    console.log(accounts[0]);\n    setAddress(accounts[0]);\n\n    // 抓取智能合约\n    const pt = newBankContract(web3);\n    setBankContract(pt);\n  };\n\n  return (\n    <body className='body' style={{height:'100vh'}}>\n    <div className=\"App bg-img\">\n      <div className='card'>\n        <h1 className='h1'>REN KE BANK</h1>\n        <button className='button' onClick={connectWallet}>connect wallet</button>\n      <h3 className='h3'>账户地址-Address:{address}</h3>\n\n      <section>\n        <div>\n          <p className='h3'>银行余额:{myDeposit} <button onClick={getMyDeposit}>查询</button> </p>\n        </div>\n      </section>\n      \n      <section>\n        <div>\n          <input className='input' onChange={newNumber} type='type'/>\n          <button onClick={deposit}>存钱</button>\n        </div>\n      </section>\n      <></>\n      <section>\n        <div>\n          <input className='input' onChange={newNumber} type='type'/>\n          <button onClick={withdraw}>取钱</button>\n        </div>\n      </section>\n      <section>\n        <div>\n          <p>转账地址：<input className='input' onChange={newAddress} type='type'/></p>\n          <p>转账金额：<input className='input' onChange={newNumber} type='type'/><button onClick={transfer}>转账</button></p>\n        </div>\n      </section>\n      </div>\n    </div></body>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}